---
- name: ensure homebrew/php is tapped
  homebrew_tap: tap={{ item }}
  with_items:
    - homebrew/dupes
    - homebrew/versions
    - homebrew/php

- name: ensure php56 is installed/updated
  homebrew: name=php56 state=latest install_options=without-pear

- name: ensure composer is installed/updated
  homebrew: name=composer state=latest

- name: ensure drush is installed
  homebrew: name=drush state=latest

- name: ensure drupal console is installed
  shell: composer global require drupal/console:@stable
  args:
    creates: ~/.composer/vendor/drupal/console

- name: ensure configuration is added to stack.d
  copy: src={{ item }} dest={{ stack_d }}
  with_items:
    - drupal.zsh

- name: ensure valkyrie is installed
  command: drush
  args:
    creates: ~/.drush/valkyrie

- name: ensure valkyrie is installed
    git: repo=git@github.com:GetValkyrie/valkyrie.git dest=~/.drush/valkyrie version=0.5.1
